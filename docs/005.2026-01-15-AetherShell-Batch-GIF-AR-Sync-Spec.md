# AetherShell Developer Log 005

## Project AetherShell: Batch GIF-AR Integration Spec

**Version:** 1.2  
**Date:** 2026-01-15  
**Subject:** 2D-to-3D Batch Processing & Spatial Audio Triggers

## 1. Executive Summary

This log solidifies the "Aether Sketch" pipeline. The system moves from real-time streaming to a **Batch-Upload** model. Users draw a sequence of frames on the **Nintendo DS**, which are then compiled by the **Java Hub** into a transparent animated GIF. The **iPhone** renders these as "Ghost Sketches" in AR space with proximity-based spatial audio.

---

## 2. Updated Component Logic

### A. The DS "Director" (Multi-Frame Capture)

- **Input:** User draws 1â€“3 frames on the resistive touchscreen.
- **Buffer:** The DS stores these in internal RAM as 1-bit arrays.
- **The "Done" Event:** Upon pressing "Done," the DS sends a **Multipart HTTP POST** to the Java Hub containing the raw frame data.

### B. The Java Hub (Image Factory & AI Vibe-Check)

- **Transparency Engine:** Iterates through pixels; converts "background" bits to `Alpha: 0`.
- **GIF Compiler:** Stitches the 3 frames into a single `.gif` using a frame-delay of ~200ms.
- **AI Specialist (LangChain):** Analyzes **Frame 1 only** to categorize the entity (A: Cat, B: Stickman, C: Monster, D: Object) or determine the "Mood."
- **Persistence:** Commits the GIF URL and the AI-determined `Sound_ID` to **PostgreSQL**.

### C. The iPhone Viewer (Spatial AR)

- **Rendering:** Uses `SCNPlane` with the transparent GIF applied as a `diffuse.contents` texture.
- **Positioning:** User anchors the drawing to real-world surfaces (chairs/tables) using ARKit plane detection.
- **Proximity Audio:** - Calculates Euclidean distance: $d = \sqrt{(x_2-x_1)^2 + (y_2-y_1)^2 + (z_2-z_1)^2}$.
  - Triggers the AI-selected `.wav` file (e.g., "Meow", "Hello") when the user enters a <0.5m radius.

---

## 3. Revised Port & Data Matrix

| Service            | Protocol | Task                | Data Type                        |
| :----------------- | :------- | :------------------ | :------------------------------- |
| **DS Ingress**     | HTTP     | Batch Upload        | Multipart/form-data (Raw Bytes)  |
| **Java Processor** | Internal | GIF Stitching       | 1-bit to Transparent RGBA        |
| **AI Specialist**  | HTTPS    | Vision/Mood Tagging | Single Frame Analysis            |
| **iOS Egress**     | HTTPS    | AR Placement        | Animated Texture + Spatial Audio |

---

## 4. Constraints & Mitigations

- **DS Wi-Fi:** Uses Legacy WEP or Open Hotspot to bypass WPA3 handshake issues.
- **AR Rendering:** SceneKit does not play GIFs natively; textures are cycled programmatically or via a SpriteKit scene overlay.
- **Audio Lag:** Sound files are pre-cached on the iPhone to ensure zero-latency triggers upon approach.

---

_End of Specification_
